
ros的回调函数

## ros::spin()

在ROS(机器人操作系统)中,`ros::spin()`函数的作用是进入循环等待回调的执行。

`ros::spin()`会检查节点是否还在运行,并处理待处理的事件和回调函数。 它通常在ROS程序的main函数中被调用,用来让节点进入待命状态。

`ros::spin()`具体做了以下几件事:

- 1. 调用`ros::getGlobalCallbackQueue()->callAvailable()`来执行pending的回调函数。
- 2. 如果程序未设置退出,则 sleep 一段时间(1毫秒)。
- 3. 重复上述操作,持续处理回调函数。
- 4. 如果检测到需要退出程序,则退出spin循环。

所以在编写ROS节点时,通过调用`ros::spin()`可以让节点不断处理收到的ROS事件和消息,执行相关的回调函数,实现节点的持续运行。

通常在main函数末尾添加:

cpp

Copy code

`ros::spin();`

来进入循环等待并处理回调执行。

总之,ros::spin()对于编写ROS节点非常重要,它让节点能够一直运行并及时响应ROS事件和消息。